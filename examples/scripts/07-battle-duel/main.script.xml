<!-- include: battle-loop.script.xml -->
<!-- include: victory.script.xml -->
<!-- include: defeat.script.xml -->
<script name="main">
  <var name="playerName" type="string" value="'Hero'"/>
  <var name="enemyName" type="string" value="'Bandit'"/>
  <var name="playerHp" type="number" value="12"/>
  <var name="enemyHp" type="number" value="12"/>
  <var name="potions" type="number" value="1"/>
  <var name="rounds" type="number" value="0"/>

  <text>Battle start: ${playerName}(${playerHp}) vs ${enemyName}(${enemyHp})</text>
  <text>Tip: if you keep using weak attacks, you will lose.</text>

  <call
    script="battle-loop"
    args="playerName:playerName,enemyName:enemyName,playerHp:ref:playerHp,enemyHp:ref:enemyHp,potions:ref:potions,rounds:ref:rounds"
  />

  <if when="playerHp > 0 &amp;&amp; enemyHp &lt;= 0">
    <text>Result: ${playerName} wins in ${rounds} rounds. hp=${playerHp}</text>
    <return script="victory"/>
    <else>
      <text>Result: ${enemyName} wins in ${rounds} rounds. hp=${enemyHp}</text>
      <return script="defeat"/>
    </else>
  </if>
</script>
